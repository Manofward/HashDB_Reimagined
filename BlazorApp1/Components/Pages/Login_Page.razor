@page "/login"
@rendermode InteractiveServer
@using BlazorApp1.Utilities
@inject ConnectDB.Connection _connection
@inject Cookie_Storage_Accessor Cookie_Storage_Accessor

<!--Login things-->

<h2>Login</h2>
<p>Enter your text to hash:</p>
<input @bind="Login_Username" placeholder="Enter Username" />
<input @bind="Login_Password" placeholder="Enter Password" />
<button @onclick="Login">Login</button>

<p>@Result_Login</p>

@code {
    // connection strings
    private ConnectDB.Connection _website_Connection;
    private Controller.Output_Controller _output_Control;

    // Login Values
    private string Login_Username { get; set; }
    private string Login_Password { get; set; }
    private string Result_Login { get; set; }

    // when the site is opened it does that
    protected override async Task OnInitializedAsync()
    {
        _website_Connection = _connection;
        _output_Control = new Controller.Output_Controller();
    }

    public async Task Login()
    {
        bool result = _website_Connection.Try_Login(Login_Username, Login_Password);

        Result_Login = _output_Control.Login_Output(result);

        if (result)
        {
            await Cookie_Storage_Accessor.Set_Value_Async(Login_Username, result);
        }
    }
}